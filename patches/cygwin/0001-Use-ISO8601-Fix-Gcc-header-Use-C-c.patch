From 85a5c8b346baacf6f7f802a34e78ab887d6e633a Mon Sep 17 00:00:00 2001
From: Jari Aalto <jari.aalto@cante.net>
Date: Fri, 10 Feb 2012 13:24:36 +0200
Subject: [PATCH] Use ISO8601, Fix Gcc header, Use -C-c
Organization: Private
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

Signed-off-by: Jari Aalto <jari.aalto@cante.net>
---
 xtail.c |   16 ++++++++++------
 1 files changed, 10 insertions(+), 6 deletions(-)

diff --git a/xtail.c b/xtail.c
index 4e8f489..9ab847e 100644
--- a/xtail.c
+++ b/xtail.c
@@ -138,13 +138,10 @@ int main(int argc, char *argv[])
 
 	/*
 	 * Display what we are watching if a SIGINT was caught.
-	 */
 	if (sigcaught) {
-	    printf("SIGNAL %d\n", sigcaught);
-	    show_status();
 	    sigcatcher(0);
 	}
-
+	*/
 
 	/*
 	 * Go through all of the files looking for changes.
@@ -358,8 +355,15 @@ int main(int argc, char *argv[])
 
 RETSIGTYPE sigcatcher(int sig)
 {
-    if (sig == SIGQUIT)
-	(void) exit(0);
+    if (sig == SIGINT)
+    {
+	show_status();
+	printf("Exit (y/N): ");
+	int ch = getchar();
+
+	if ( (ch == (int)'y') || (ch == (int)'Y') )
+	    (void) exit(0);
+    }
     sigcaught = sig;
 #ifdef STATUS_ENAB
     (void) signal(SIGINT, sigcatcher);
-- 
1.7.5.1

