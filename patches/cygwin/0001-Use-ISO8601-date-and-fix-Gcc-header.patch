From 25253138c580718bbe2d190f1b3dfed7c1cbd753 Mon Sep 17 00:00:00 2001
From: Jari Aalto <jari.aalto@cante.net>
Date: Thu, 2 Feb 2012 16:40:51 +0200
Subject: [PATCH] Use ISO8601 date and fix Gcc header
Organization: Private
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: 8bit

Signed-off-by: Jari Aalto <jari.aalto@cante.net>
---
 miscfuncs.c |   10 ++++++++--
 xtail.c     |    3 ++-
 2 files changed, 10 insertions(+), 3 deletions(-)

diff --git a/miscfuncs.c b/miscfuncs.c
index ae2e500..fb47158 100644
--- a/miscfuncs.c
+++ b/miscfuncs.c
@@ -215,10 +215,12 @@ void show_status(void)
 {
     int i, n;
     struct tm *tp;
+/*
     static char *monname[] = {
 	"Jan", "Feb", "Mar", "Apr", "May", "Jun",
 	"Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
     };
+*/
     static time_t tval0;
     time_t tval;
 
@@ -232,9 +234,13 @@ void show_status(void)
     for (i = 0, n = 0 ; i < List_file->num_entries ; ++i) {
 	if (List_file->list[i]->fd > 0) {
 	    tp = localtime(&List_file->list[i]->mtime);
-	    (void) printf("%4d  %2d-%3s-%02d %02d:%02d:%02d  %s\n",
+	    (void) printf("%4d  %d-%02d-%02d %02d:%02d:%02d  %s\n",
 		++n,
-		tp->tm_mday, monname[tp->tm_mon], (tp->tm_year % 100),
+		tp->tm_year + 1900,
+		tp->tm_mon + 1,
+		tp->tm_mday,
+/*		monname[tp->tm_mon], */
+/*		(tp->tm_year % 100), */
 		tp->tm_hour, tp->tm_min, tp->tm_sec,
 		List_file->list[i]->name
 	    );
diff --git a/xtail.c b/xtail.c
index ebe2ff5..4e8f489 100644
--- a/xtail.c
+++ b/xtail.c
@@ -1,5 +1,5 @@
 /* $Id: xtail.c,v 2.5 2000/06/04 09:09:03 chip Exp $ */
-
+#include <string.h>
 #include "config.h"
 #include <sys/types.h>
 #include <sys/stat.h>
@@ -140,6 +140,7 @@ int main(int argc, char *argv[])
 	 * Display what we are watching if a SIGINT was caught.
 	 */
 	if (sigcaught) {
+	    printf("SIGNAL %d\n", sigcaught);
 	    show_status();
 	    sigcatcher(0);
 	}
-- 
1.7.5.1

